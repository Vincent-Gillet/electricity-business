spring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.defer-datasource-initialization=true
spring.sql.init.mode=always

# Force l'utilisation du dialecte H2 pour éviter des problèmes de syntaxe comme InnoDB
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect

# Afficher les requêtes SQL (très utile pour le débogage)
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Augmenter le niveau de log d'Hibernate pour le dialecte (pour voir la détection)
logging.level.org.hibernate.dialect.resolver=DEBUG

# JWT (clés de test - doivent être >= 256 bits pour HS256)
jwt.secret-key-access-token=dGVzdC1hY2Nlc3Mta2V5LWZvci11bml0LXRlc3RzLW11c3QtYmUtYXQtbGVhc3QtMjU2LWJpdHMtbG9uZy1IUzI1Ng==
jwt.secret-key-refresh-token=dGVzdC1yZWZyZXNoLWtleS1mb3ItdW5pdC10ZXN0cy1tdXN0LWJlLWF0LWxlYXN0LTI1Ni1iaXRzLWxvbmctSFMyNTY=

# Désactive la sécurité pour les tests
#spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration

# Désactive la page d'erreur blanche
server.error.whitelabel.enabled=false

# Configuration de Jackson pour les tests
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.date-format=yyyy-MM-dd HH:mm:ss
spring.jackson.time-zone=UTC

logging.level.org.springframework.security=DEBUG